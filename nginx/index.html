<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cs-3337-group-8.github.io/Questivity/nginx/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>NGINX - Questivity LTI</title>
<link href="https://use.fontawesome.com/releases/v5.12.0/css/all.css" rel="stylesheet"/>
<link href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css" rel="stylesheet"/>
<link href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css" rel="stylesheet"/>
<link href="//rsms.me/inter/inter.css" rel="stylesheet" type="text/css"/>
<link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&amp;subset=latin-ext,latin" rel="stylesheet" type="text/css"/>
<link href="../css/bootstrap-custom.min.css" rel="stylesheet"/>
<link href="../css/base.min.css" rel="stylesheet"/>
<link href="../css/cinder.min.css" rel="stylesheet"/>
<link href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css" rel="stylesheet"/>
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->
<link href="../assets/stylesheets/panzoom.css" rel="stylesheet"/></head>
<body>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
<div class="container">
<!-- Collapsed navigation -->
<div class="navbar-header">
<!-- Expander button -->
<button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<!-- Main title -->
<a class="navbar-brand" href="..">Questivity LTI</a>
</div>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li>
<a href="../db-api/">QuestivityDB</a>
</li>
<li class="active">
<a href="./">NGINX</a>
</li>
<li>
<a href="../docker/">Docker</a>
</li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<a href="../db-api/" rel="prev">
<i class="fas fa-arrow-left"></i> Previous
                        </a>
</li>
<li>
<a href="../docker/" rel="next">
                            Next <i class="fas fa-arrow-right"></i>
</a>
</li>
<li>
<a docs="" edit="" href="https://github.com/CS-3337-Group-8/Questivity" master="" nginx.md"=""><i class="fab fa-github"></i> Edit on GitHub</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
<ul class="nav bs-sidenav">
<li class="first-level active"><a href="#nginx-configuration-documentation">Nginx Configuration Documentation</a></li>
<li class="second-level"><a href="#configuration-overview">Configuration Overview</a></li>
<li class="second-level"><a href="#http-block">HTTP Block</a></li>
<li class="third-level"><a href="#server-blocks">Server Blocks</a></li>
</ul>
</div></div>
<div class="col-md-9" role="main">
<h1 id="nginx-configuration-documentation">Nginx Configuration Documentation</h1>
<p>This document provides an overview of the Nginx configuration for the Questivity project. The configuration is set up to handle multiple services and includes essential directives to optimize the server's performance.</p>
<h2 id="configuration-overview">Configuration Overview</h2>
<pre><code class="language-nginx">worker_processes auto;

events {
    worker_connections 1024;
}
</code></pre>
<ul>
<li><strong>worker_processes auto;</strong>: Automatically sets the number of worker processes based on available CPU cores, optimizing performance for handling requests.</li>
<li><strong>worker_connections 1024;</strong>: Limits the maximum number of simultaneous connections that can be handled by a single worker process. In this configuration, each worker can handle up to 1024 connections.</li>
</ul>
<h2 id="http-block">HTTP Block</h2>
<pre><code class="language-nginx">http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
</code></pre>
<ul>
<li><strong>include /etc/nginx/mime.types;</strong>: Includes the MIME types configuration file, allowing Nginx to serve files with the correct content type based on their extensions.</li>
<li><strong>default_type application/octet-stream;</strong>: Sets the default MIME type for files that do not have a specific type defined, ensuring they are served as binary data.</li>
</ul>
<h3 id="server-blocks">Server Blocks</h3>
<h4 id="heimdall-server">Heimdall Server</h4>
<pre><code class="language-nginx">server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://heimdall:80/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>
<ul>
<li><strong>listen 80;</strong>: Specifies that this server block listens for incoming HTTP requests on port 80.</li>
<li><strong>server_name localhost;</strong>: Defines the server name for this block, allowing it to respond to requests made to <code>localhost</code>.</li>
<li><strong>proxy_pass http://heimdall:80/;</strong>: Proxies requests to the Heimdall service running on port 80.</li>
<li><strong>proxy_set_header</strong> directives: Forward client information to the proxied server, ensuring it receives the original request details.</li>
</ul>
<h4 id="logs-server">Logs Server</h4>
<pre><code class="language-nginx">server {
    listen 80;
    server_name logs.localhost;

    location / {
        proxy_pass http://dozzle:8080/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>
<ul>
<li>This server block is configured for accessing logs via Dozzle, allowing users to view Docker container logs.</li>
</ul>
<h4 id="api-server">API Server</h4>
<pre><code class="language-nginx">server {
    listen 80;
    server_name api.localhost;

    location / {
        alias /usr/share/nginx/html/api/;
    }

    location /db/ {
        proxy_pass http://db-api:3000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>
<ul>
<li><strong>alias /usr/share/nginx/html/api/</strong>: Serves static files located in the specified directory for API-related requests.</li>
<li>Proxies requests to the <code>/db/</code> path to the DB API service for dynamic interactions.</li>
</ul>
<h4 id="adminer-server">Adminer Server</h4>
<pre><code class="language-nginx">server {
    listen 80;
    server_name adminer.localhost;

    location / {
        proxy_pass http://adminer:8080/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>
<ul>
<li>This block facilitates access to the Adminer database management tool.</li>
</ul>
<h4 id="questivity-server">Questivity Server</h4>
<pre><code class="language-nginx">server {
    listen 80;
    server_name questivity.localhost;

    location / {
        alias /usr/share/nginx/html/questivity/;
    }
}
</code></pre>
<ul>
<li>Serves the main Questivity application from the specified directory.</li>
</ul>
<h4 id="canvas-server">Canvas Server</h4>
<pre><code class="language-nginx">server {
    listen 80;
    server_name canvas.localhost;

    location / {
        proxy_pass http://canvas:3000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>
<ul>
<li>Proxies requests to the Canvas service, enabling interaction with the Canvas LMS.</li>
</ul></div>
</div>
<footer class="col-md-12 text-center">
<hr/>
<p>
<small>© 2024 <a href="https://github.com/CS-3337-Group-8" rel="noopener" target="_blank">CS-3337-Group-8</a>
</small><br/>
<small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
</p>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="../js/bootstrap-3.0.3.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>var base_url = ".."</script>
<script src="../js/base.js"></script>
<div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
<script src="../assets/javascripts/panzoom.min.js"></script><script src="../assets/javascripts/zoompan.js"></script></body>
</html>
